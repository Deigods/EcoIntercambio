{% extends "app/base.html" %}
{% load static humanize %}

{% block title %}Inicio - EcoIntercambio{% endblock %}

{% block content %}
<div class="search-bar-container mt-4">
    <div class="search-bar">
        <form class="d-flex flex-wrap gap-2 align-items-center" method="GET" action="{% url 'home' %}">
            <input class="form-control" style="min-width:200px" type="search" name="query" placeholder="Buscar" value="{{ query|default_if_none:'' }}">
            <select class="form-select" name="tipo">
                <option value="">Todos los tipos</option>
                {% for t in tipos %}
                    <option value="{{ t.id }}" {% if t.id|stringformat:"s" == tipo_seleccionado %}selected{% endif %}>{{ t.tipo_objeto }}</option>
                {% endfor %}
            </select>
            <select class="form-select" name="ubicacion">
                <option value="">Todas las regiones</option>
                {% for u in ubicaciones %}
                    <option value="{{ u.id }}" {% if u.id|stringformat:"s" == ubicacion_seleccionada %}selected{% endif %}>{{ u.ubicacion_name }}</option>
                {% endfor %}
            </select>
            <button class="btn btn-success" type="submit"><i class="bi bi-search"></i></button>
        </form>
    </div>
</div>

<div class="container my-5">
    <div class="row container-cards">
        {% if entity %}
            {% for p in entity %}
                <div class="col-md-4 media-card">
                    <div class="card h-100 position-relative {% if p.usuario.profile.is_premium_active %}premium-card{% endif %}">
                        
                        {% if p.usuario.profile.is_premium_active %}
                            <!-- Cintillo Premium (visible para todos) -->
                            <span class="badge bg-warning text-dark position-absolute top-0 end-0 m-2 shadow-sm premium-badge">
                                 Premium
                            </span>
                        {% endif %}
                        
                        {% if p.imagen %}
                            <img src="{{ p.imagen.url }}" class="card-img-top" alt="{{ p.nombre }}">
                        {% endif %}
                        
                        <div class="card-body d-flex flex-column {% if p.usuario.profile.is_premium_active %}premium-body{% endif %}">
                            <h5 class="card-title text-center {% if p.usuario.profile.is_premium_active %}premium-title{% endif %}">
                                <strong>{{ p.nombre }}</strong>
                            </h5>
                            <p class="mb-1 text-muted text-center"><strong>Estado:</strong> {{ p.estado }}</p>
                            <p class="mb-1 text-muted text-center"><strong>Color:</strong> {{ p.color }}</p>
                            <p class="mb-1 text-muted text-center"><strong>Tipo:</strong> {{ p.tipo }}</p>
                            <p class="mb-1 text-muted text-center"><strong>Ubicaci贸n:</strong> {{ p.ubicacion }}</p>
                            <p class="mb-3 text-muted text-center"><strong>Fecha de Publicaci贸n:</strong> {{ p.fecha_publicacion }}</p>
                            <a href="{% url 'producto' id=p.id %}" class="btn btn-success">Ver</a>
                        </div>
                    </div>
                </div>
            {% endfor %}
        {% else %}
            <div class="col-12 text-center"><p class="text-muted">No hay productos disponibles en este momento.</p></div>
        {% endif %}
    </div>
    <div>{% include 'app/paginator.html' %}</div>
</div>

{% block sobre_nosotros %}
<section>
    <div class="container text-center">
        <h1 class="sobre-nosotros">SOBRE NOSOTROS</h1>
        <div class="row justify-content-center align-items-center">
            <div class="col-md-6 div-nosotros-media text-start">
                <p>
                    En EcoIntercambio, creemos en la importancia de darle una segunda vida a los objetos que ya no
                    utilizamos. Nuestra misi贸n es conectar a personas con una visi贸n sostenible, quienes desean
                    contribuir al cuidado del medio ambiente a trav茅s del reciclaje y la reutilizaci贸n de recursos.
                    Desde nuestro inicio, nos hemos comprometido a reducir la huella de carbono, creando una
                    comunidad en la que cada acci贸n cuenta. Entendemos que cada objeto tiene un valor, y nuestro
                    objetivo es facilitar su intercambio de manera segura y conveniente.
                    Estamos aqu铆 para transformar la manera en que las personas perciben el reciclaje,
                    proporcionando una plataforma donde cualquier persona pueda encontrar un nuevo hogar para esos
                    art铆culos que ya no necesita, evitando que terminen en vertederos y fomentando una cultura de
                    responsabilidad y cuidado del planeta.
                    EcoIntercambio es m谩s que una aplicaci贸n; es un movimiento hacia un futuro m谩s verde y
                    consciente. nete a nosotros y s茅 parte del cambio que el mundo necesita.
                </p>
            </div>
            <div class="col-md-6 text-center div-nosotros-media">
                <img src="{% static 'images/sobre-nosotros-multivende.png' %}" alt="Sobre Nosotros"
                        style="max-width: 100%; height: auto;">
            </div>
        </div>
        <img src="{% static 'images/retiro-de-reciclaje-gratis.png' %}" alt="Cami贸n de reciclaje"
                    style="padding-top: 50px;" class="camion-nosotros">
    </div>
</section>
{% endblock %}
{% endblock %}
