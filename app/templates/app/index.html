{% extends "app/base.html" %}
{% load static humanize %}

{% block title %}Inicio - EcoIntercambio{% endblock %}

{% block content %}
<div class="search-bar-container mt-4">
    <div class="search-bar">
        <form class="d-flex flex-wrap gap-2 align-items-center" method="GET" action="{% url 'home' %}">
            <input class="form-control" style="min-width:200px" type="search" name="query" placeholder="Buscar" value="{{ query|default_if_none:'' }}">
            <select class="form-select" name="tipo">
                <option value="">Todos los tipos</option>
                {% for t in tipos %}
                    <option value="{{ t.id }}" {% if t.id|stringformat:"s" == tipo_seleccionado %}selected{% endif %}>{{ t.tipo_objeto }}</option>
                {% endfor %}
            </select>
            <select class="form-select" name="ubicacion">
                <option value="">Todas las regiones</option>
                {% for u in ubicaciones %}
                    <option value="{{ u.id }}" {% if u.id|stringformat:"s" == ubicacion_seleccionada %}selected{% endif %}>{{ u.ubicacion_name }}</option>
                {% endfor %}
            </select>
            <button class="btn btn-success" type="submit"><i class="bi bi-search"></i></button>
        </form>
    </div>
</div>

<div class="container my-5">
    <div class="row container-cards">
        {% if entity %}
            {% for p in entity %}
                <div class="col-md-4 media-card">
                    <div class="card mb-3">
                        {% if p.imagen %}<img src="{{ p.imagen.url }}" class="card-img-top" alt="{{ p.nombre }}">{% endif %}
                        <div class="card-body">
                            <h5 class="card-title text-center">{{ p.nombre|title }}</h5>
                            <p class="text-muted text-center">Ubicación: {{ p.ubicacion.ubicacion_name }}</p>
                            <p class="text-muted text-center">Fecha de publicación: {{ p.fecha_publicacion }}</p>
                            <p class="text-muted text-center">Estado: {{ p.estado }}</p>
                            <a href="{% url 'producto' id=p.id %}" class="btn btn-success">Ver</a>
                        </div>
                    </div>
                </div>
            {% endfor %}
        {% else %}
            <div class="col-12 text-center"><p class="text-muted">No hay productos disponibles en este momento.</p></div>
        {% endif %}
    </div>
    <div>{% include 'app/paginator.html' %}</div>
</div>

{% block sobre_nosotros %}
<section>
    <div class="container text-center">
        <h1 class="sobre-nosotros">SOBRE NOSOTROS</h1>
        <div class="row justify-content-center align-items-center">
            <div class="col-md-6 div-nosotros-media text-start">
                <p>
                    En EcoIntercambio, creemos en la importancia de darle una segunda vida a los objetos que ya no
                    utilizamos. Nuestra misión es conectar a personas con una visión sostenible, quienes desean
                    contribuir al cuidado del medio ambiente a través del reciclaje y la reutilización de recursos.
                    Desde nuestro inicio, nos hemos comprometido a reducir la huella de carbono, creando una
                    comunidad en la que cada acción cuenta. Entendemos que cada objeto tiene un valor, y nuestro
                    objetivo es facilitar su intercambio de manera segura y conveniente.
                    Estamos aquí para transformar la manera en que las personas perciben el reciclaje,
                    proporcionando una plataforma donde cualquier persona pueda encontrar un nuevo hogar para esos
                    artículos que ya no necesita, evitando que terminen en vertederos y fomentando una cultura de
                    responsabilidad y cuidado del planeta.
                    EcoIntercambio es más que una aplicación; es un movimiento hacia un futuro más verde y
                    consciente. Únete a nosotros y sé parte del cambio que el mundo necesita.
                </p>
            </div>
            <div class="col-md-6 text-center div-nosotros-media">
                <img src="{% static 'images/sobre-nosotros-multivende.png' %}" alt="Sobre Nosotros"
                        style="max-width: 100%; height: auto;">
            </div>
        </div>
        <img src="{% static 'images/retiro-de-reciclaje-gratis.png' %}" alt="Camión de reciclaje"
                    style="padding-top: 50px;" class="camion-nosotros">
    </div>
</section>
{% endblock %}

{% endblock %}