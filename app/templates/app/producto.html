{% load static %}

<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Detalles del producto</title>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>

    <!-- CSS -->
    <link rel="stylesheet" href="{% static 'css/cssproducto.css' %}">

    <!-- Mapbox CSS -->
    <link href='https://api.mapbox.com/mapbox-gl-js/v2.9.1/mapbox-gl.css' rel='stylesheet' />
    <link rel="stylesheet"
        href="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.7.0/mapbox-gl-geocoder.css"
        type="text/css">

    <script defer src="{% static 'js/jsproducto.js' %}"></script>

    <!-- Mapbox JS -->
    <script src='https://api.mapbox.com/mapbox-gl-js/v2.9.1/mapbox-gl.js'></script>
    <script
        src='https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.7.0/mapbox-gl-geocoder.min.js'></script>
</head>

<body>
    <section style="height: 100vh;">
        <!-- Botón de volver atrás -->
        <a href="javascript:history.back()" class="btn back-button" style="margin-top: 30px;margin-bottom: 30px;">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-arrow-left"
                viewBox="0 0 16 16">
                <path fill-rule="evenodd"
                    d="M5.854 3.646a.5.5 0 0 1 0 .708L3.207 7.5H14.5a.5.5 0 0 1 0 1H3.207l2.647 3.146a.5.5 0 0 1-.708.708l-3.5-4a.5.5 0 0 1 0-.708l3.5-4a.5.5 0 0 1 .708 0z" />
            </svg>
            Volver
        </a>

        <div class="container-fluid">
            <div class="row">
                <div class="col-6" id="carr">
                    <!-- Carrusel de imágenes -->
                    <div id="carouselExampleIndicators" class="carousel slide">
                        <div class="carousel-indicators">
                            <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="0"
                                class="active" aria-current="true" aria-label="Slide 1"></button>
                            <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="1"
                                aria-label="Slide 2"></button>
                            <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="2"
                                aria-label="Slide 3"></button>
                        </div>
                        <div class="carousel-inner">
                            <div class="carousel-item active">
                                <img src="{{ entidad.imagen.url }}" class="d-block w-100" alt="Imagen del producto">
                            </div>
                        </div>

                        <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators"
                            data-bs-slide="prev">
                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                            <span class="visually-hidden">Previous</span>
                        </button>
                        <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators"
                            data-bs-slide="next">
                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                            <span class="visually-hidden">Next</span>
                        </button>
                    </div>
                </div>
                <div class="col-6" id="lista">
                    <h2>{{entidad.nombre}}</h2>
                    <div class="product-details">
                        <ul class="list-group">
                            <li class="list-group-item"><strong>Estado:</strong> {{entidad.estado}} </li>
                            <li class="list-group-item"><strong>Color:</strong> {{entidad.color}} </li>
                            <li class="list-group-item"><strong>Tipo de Objeto:</strong> {{entidad.tipo}} </li>
                            <li class="list-group-item"><strong>Ubicación:</strong> {{entidad.ubicacion}} </li>
                            <li class="list-group-item"><strong>Fecha de publicación:</strong>
                                {{entidad.fecha_publicacion}} </li>
                        </ul>
                    </div>
                    {% if entidad.usuario != request.user and user.username != "invitado" %}
                    <button class="btn btn-primary contact-button mt-3"
                        onclick="window.location.href='{% url 'detailms' entidad.usuario.username %}'" style="width: 100%;">
                        Contactar al Ofertante
                    </button>
                    {% endif %}
                </div>
            </div>
        </div>

        <div>
            <h2 class="text-center mt-3">Ubicación del Producto</h2>
            <div id="map" style="border: 1px solid black;"></div>
        </div>
    </section>

    <input type="hidden" id="latitude" name="latitude" value="{{ entidad.latitud|floatformat:6 }}">
    <input type="hidden" id="longitude" name="longitude" value="{{ entidad.longitud|floatformat:6 }}">

</body>

</html>
